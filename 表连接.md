#### 基础

* 驱动表查一次，被驱动表 根据 驱动表值 查询N次，访问次数取决于对驱动表执行单表查询后的结果集中的记录条数

* 内连接和外连接的根本区别就是在驱动表中的记录不符合`ON`子句中的连接条件时不会把该记录加入到最后的结果集

* 内连接写法

  ~~~sql
  # 以下写法等价，默认是内连接，推荐INNER JOIN，语义明确，内连接驱动表和被驱动表位置没啥区别，外连接LEFT JOIN 和 RIGHT JOIN则区别很大
  SELECT * FROM t1 JOIN t2;
  
  SELECT * FROM t1 INNER JOIN t2;
  # 交叉连接一般是没有条件的内连接
  SELECT * FROM t1 CROSS JOIN t2;
  
  SELECT * FROM t1, t2;
  ~~~

  

* LEFT JOIN 以左侧表为驱动表，RIGHT JOIN以右侧表为驱动

* WHERE 与 ON 作用一样，但是ON可以把被驱动表找不到的结果也返回，用NULL填充，WHERE将凡是不符合的过滤记录通通排除在外，内连接中两者一致，使用LEFT JOIN与 RIGHT JOIN时必须使用ON连接条件

* 优化方向： 尽量减少访问被驱动表的次数，尽量不用*作为查询条件

* mysql本身带优化器，对于内连接的连接顺序会根据成本来优化，而外连接由于驱动表固定，所以不会优化连接顺序，再上内连接和外连接的区别在于被驱动表是否返回NULL值，当直接或间接指定被驱动表不返回NULL值时，可以将外连接转成内连接写法，以方便优化器优化

#### 查询成本

* `I/O`成本
  * 我们的表经常使用的`MyISAM`、`InnoDB`存储引擎都是将数据和索引都存储到磁盘上的，当我们想查询表中的记录时，需要先把数据或者索引加载到内存中然后再操作。这个从磁盘到内存这个加载的过程损耗的时间称之为`I/O`成本，每次访问被驱动表都会把被驱动表的记录会被加载到内存中，在内存中的每一条记录只会和驱动表结果集的一条记录做匹配，之后就会被从内存中清除掉。周而复始，知道驱动表的记录匹配完成
* `CPU`成本
  * 读取以及检测记录是否满足对应的搜索条件、对结果集进行排序等这些操作损耗的时间称之为`CPU`成本。
* 成本常数
  * 对于`InnoDB`存储引擎来说，页是磁盘和内存之间交互的基本单位，读取一个页面花费的成本默认是`1.0`，读取以及检测一条记录是否符合搜索条件的成本默认是`0.2`
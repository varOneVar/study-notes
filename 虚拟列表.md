# 虚拟列表

> 真实 DOM 数量 = Math.ceil(容器高度 / 条目高度)

1. 获取父容器高度
2. 计算应显示的DOM数量
3. 获取应该显示在视窗的数据条目



> 真实容器高度 = 数据总数 * 每条 item 的高度

> 滚动列表

1. 当滚动时，计算当前视窗内的数据索引，第一个和最后一个
2. 获取相应的数据切片
3. 对比索引，如修改，对元素位置做位移 绝对定位和transform(参考better-scroll)

> 按需更新列表

1. 改变元素位置，不去创建删除DOM，将translateY的值变化

2. 求前一种状态与当前状态之间的索引差集，初始填充数组-->计算索引差集-->更新数组

3. 向下滚动和向上滚动有补位区别，所以要判断滚动方向

4. 修复滚动到最后一屏的计算差异，维持DOM数量不变情况下，最后一屏其实索引应为多少，与

   计算的视窗第一个元素索引对比，取二者最小值

